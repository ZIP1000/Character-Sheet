<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D&D Character Sheet</title>
    <link rel="stylesheet" href="css/styles.css">
    <script src="js/main.js" type="module" defer></script>
</head>

<body>
    <nav class="tab-container">
        <button class="tab" data-target="player" onclick="openTab('player')">Player</button>
        <button class="tab" data-target="inventory" onclick="openTab('inventory')">Inventory</button>
        <button class="tab" data-target="spells" onclick="openTab('spells')">Spells</button>
        <button onclick="saveGame()" aria-label="Save Game">Save Game</button>
        <button onclick="loadGame()" aria-label="Load Game">Load Game</button>
        <button onclick="toggleDarkMode()" aria-label="Toggle Dark Mode">Toggle Dark Mode</button>
    </nav>

    <header>
        <h1>Dungeons & Dragons Character Sheet</h1>
    </header>

    <main>
        <!-- Inventory Tab -->
        <section id="inventory" class="tab-content">
            <h2>Inventory</h2>
            <form class="inventory-form" onsubmit="event.preventDefault(); addItem();">
                <div class="form-group">
                    <label for="item-name">Item Name:</label>
                    <input type="text" id="item-name" required>

                    <label for="item-quantity">Quantity:</label>
                    <input type="number" id="item-quantity" value="1" min="1">

                    <label for="item-description">Description:</label>
                    <input type="text" id="item-description">

                    <button type="submit">Add Item</button>
                </div>
            </form>

            <h3>Inventory List</h3>
            <ul id="inventory-list" role="list"></ul>
        </section>

        <!-- Player Tab -->
        <section id="player" class="tab-content active-tab">
            <div class="character-sheet">
                <!-- Left Section -->
                <div class="section">
                    <h2>Character Details</h2>
                    <div class="form-group">
                        <label for="inspiration">Inspiration:</label>
                        <input type="checkbox" id="inspiration">
                    </div>

                    <div class="form-group">
                        <label for="prof-bonus">Proficiency Bonus:</label>
                        <input type="number" id="prof-bonus" value="2" oninput="updateModifiers()">
                    </div>

                    <h3>Saving Throws</h3>
                    <div id="saving-throws" role="group" aria-label="Saving Throws"></div>

                    <h3>Skills</h3>
                    <div id="skills" role="group" aria-label="Skills"></div>

                    <h3>Other Stats</h3>
                    <p>Passive Perception: <span class="mod" id="passive-perception">10</span></p>
                    <p>Initiative: <span class="mod" id="initiative">+0</span></p>
                </div>

                <!-- Middle Section -->
                <div class="section">
                    <h2>Abilities</h2>
                    <div class="form-group">
                        <label for="level">Level:</label>
                        <input type="number" id="level" value="1" min="1" max="20" oninput="updateModifiers()">
                    </div>

                    <div id="abilities" role="group" aria-label="Ability Scores"></div>
                </div>

                <!-- Right Section -->
                <div class="section">
                    <!-- Health Section -->
                    <section class="health-section" aria-labelledby="health-heading">
                        <h2 id="health-heading">Health</h2>
                        <div class="form-group">
                            <label for="max-hp">Max HP:</label>
                            <input type="number" id="max-hp" value="100" min="1" oninput="validateHP()">
                        </div>

                        <div class="form-group">
                            <label for="current-hp">Current HP:</label>
                            <input type="number" id="current-hp" value="100" min="0" oninput="validateHP()">
                        </div>

                        <div class="form-group">
                            <label for="temp-hp">Temporary HP:</label>
                            <input type="number" id="temp-hp" value="0" min="0" oninput="validateHP()">
                        </div>

                        <div class="health-controls">
                            <button onclick="resetHealth()">Reset Health</button>
                            <button onclick="takeDamage()">Take Damage</button>
                            <input type="number" id="damage-input" value="0" min="0" aria-label="Damage Amount">
                        </div>

                        <h3>Hit Dice</h3>
                        <p>Hit Dice: <span id="hit-dice">1d8</span></p>
                        <p>Available Hit Dice: <input type="number" id="available-hit-dice"></p>
                        <div class="hit-dice-controls">
                            <button onclick="useHitDie()">Use Hit Die</button>
                            <button onclick="resetHitDice()">Reset Hit Dice</button>
                        </div>

                        <h3>Death Saves</h3>
                        <div class="death-saves">
                            <div class="save-group">
                                <label>Successes:</label>
                                <div class="checkbox-group">
                                    <input type="checkbox" id="death-save-success-1" aria-label="Death Save Success 1">
                                    <input type="checkbox" id="death-save-success-2" aria-label="Death Save Success 2">
                                    <input type="checkbox" id="death-save-success-3" aria-label="Death Save Success 3">
                                </div>
                            </div>
                            <div class="save-group">
                                <label>Failures:</label>
                                <div class="checkbox-group">
                                    <input type="checkbox" id="death-save-fail-1" aria-label="Death Save Failure 1">
                                    <input type="checkbox" id="death-save-fail-2" aria-label="Death Save Failure 2">
                                    <input type="checkbox" id="death-save-fail-3" aria-label="Death Save Failure 3">
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Currency Section -->
                    <section class="currency-section" aria-labelledby="currency-heading">
                        <h2 id="currency-heading">Currency</h2>
                        <div class="currency-display">
                            <p>CP: <span id="cp-display">0</span></p>
                            <p>SP: <span id="sp-display">0</span></p>
                            <p>EP: <span id="ep-display">0</span></p>
                            <p>GP: <span id="gp-display">0</span></p>
                        </div>

                        <div class="currency-controls">
                            <label for="currency-type">Modify Currency:</label>
                            <select id="currency-type">
                                <option value="cp">Copper (CP)</option>
                                <option value="sp">Silver (SP)</option>
                                <option value="ep">Electrum (EP)</option>
                                <option value="gp">Gold (GP)</option>
                            </select>

                            <select id="add-subtract">
                                <option value="add">Add</option>
                                <option value="subtract">Subtract</option>
                            </select>

                            <input type="number" id="currency-amount" value="1" min="1">
                            <button onclick="modifyCurrency()">Apply</button>
                            <button onclick="convertCurrency()">Convert Currency</button>
                        </div>

                        <p>Total GP Value: <span id="total-gp">0</span></p>

                        <div class="exchange-rates">
                            <h4>Exchange Rates</h4>
                            <ul>
                                <li>100 CP = 1 GP</li>
                                <li>10 SP = 1 GP</li>
                                <li>2 EP = 1 GP</li>
                                <li>10 GP = 1 PP</li>
                            </ul>
                        </div>
                    </section>
                </div>
            </div>
        </section>

        <!-- Spells Tab -->
        <section id="spells" class="tab-content">
            <div class="spell-info">
                <div class="spellcasting-details">
                    <p><strong>Spellcasting Class:</strong> Druid</p>
                    <p><strong>Spellcasting Ability:</strong> Wisdom</p>
                    <p><strong>Spell Save DC:</strong> <span id="spell-save-dc">---</span></p>
                    <p><strong>Spell Attack Bonus:</strong> <span id="spell-attack-bonus">---</span></p>
                    <p><strong>Prepared Spells:</strong> <span id="prepared-spells">---</span></p>
                    <p><strong>Mana:</strong> <span id="current-mana">---</span> / <span id="max-mana">---</span></p>
                </div>

                <div id="mana-buttons" class="spell-levels">
                    <div class="spell-level-buttons">
                        <button onclick="useMana(100)" class="spell-button">
                            Level 1 {100}<span id="level-1-casts" class="mana-count"></span>
                        </button>
                        <button onclick="useMana(200)" class="spell-button">
                            Level 2 {200}<span id="level-2-casts" class="mana-count"></span>
                        </button>
                        <button onclick="useMana(300)" class="spell-button">
                            Level 3 {300}<span id="level-3-casts" class="mana-count"></span>
                        </button>
                        <button onclick="useMana(400)" class="spell-button">
                            Level 4 {400}<span id="level-4-casts" class="mana-count"></span>
                        </button>
                        <button onclick="useMana(500)" class="spell-button">
                            Level 5 {500}<span id="level-5-casts" class="mana-count"></span>
                        </button>
                        <button onclick="useMana(600)" class="spell-button">
                            Level 6 {600}<span id="level-6-casts" class="mana-count"></span>
                        </button>
                        <button onclick="useMana(700)" class="spell-button">
                            Level 7 {700}<span id="level-7-casts" class="mana-count"></span>
                        </button>
                        <button onclick="useMana(800)" class="spell-button">
                            Level 8 {800}<span id="level-8-casts" class="mana-count"></span>
                        </button>
                        <button onclick="useMana(900)" class="spell-button">
                            Level 9 {900}<span id="level-9-casts" class="mana-count"></span>
                        </button>
                    </div>
                    <button onclick="resetMana()" class="reset-mana">Reset Mana</button>
                </div>

                <div id="spellsTab" class="spells-management">
                    <h2>Spells Management</h2>
                    <div class="spell-container">
                        <div class="spell-book">
                            <h3>Spell Book</h3>
                            <ul id="spellBook" role="list"></ul>
                        </div>
                        <div class="spell-list">
                            <h3>Available Spells</h3>
                            <button onclick="addSpell()">Add Spell</button>
                            <ul id="spellList" role="list"></ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>
</body>
</html>